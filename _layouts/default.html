<!DOCTYPE html>
<html>
  <head>
    <title>The Lincolnshire Poacher</title>
    <meta charset='UTF-8'>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <meta content='The Lincolnshire Poacher is a collection of articles written by Chris Lloyd about programming, technology &amp; business.' name='description'>
    <link href='http://creativecommons.org/licenses/by-nc/2.5/au' rel='license'>
    <link href='/favicon.ico' rel='shortcut icon'>
    <link href='/screen.css' media='all' rel='stylesheet' type='text/css'>
    <link href='/print.css' media='print' rel='stylesheet' type='text/css'>
    <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js' type='text/javascript'></script>
    <script src='/libs.js' type='text/javascript'></script>
    <!--[if IE]>
      <script src='http://html5shiv.googlecode.com/svn/trunk/html5.js' type='text/javascript'></script>
    <![endif]-->
  </head>
  <body>
    <header>
      <h1>
        <a href='/'>The Lincolnshire Poacher</a>
        by Chris Lloyd
      </h1>
    </header>
    {{ content }}
    <script src="poacher.js"></script>
    <script type="text/x-brush">
    Artist.add (color, focus) ->
      size = 50+rand(150)
      s = @set()

      for dir in [{x:0,y:1},{x:1,y:0},{x:0,y: -1},{x: -1,y:0}]
        x = focus.x - size*0.5 + size*dir.x
        y = focus.y - size*0.5 + size*dir.y
        s.push @rect(x, y, size, size).attr({fill: color, stroke: 'none'})
      s.rotate(45, focus.x, focus.y)
    </script>
    <script type="text/x-brush">
    Artist.add (color) ->
      radius = 350
      @circle(@width/2, rand(2*radius)-radius, radius).attr({
        fill: color
        stroke: 'none'
      })
    </script>
    <script type="text/x-brush">
    Artist.add (color, focus) ->
      size = 200 + rand(200)
      width = 1 + rand(3)
      step = 10 + rand(10)
      c = {x: @width*0.5, y: @height*0.5}
      for i in [0..size] by step
        x = c.x + (focus.x - c.x)*(1 - (i/size))
        y = c.y + (focus.y - c.y)*(1 - (i/size))
        @circle(x, y, i).attr({
          stroke: color
          'stroke-width': 1 + rand(4)
        })
    </script>

    <script type="text/x-brush">
    Artist.add (color, focus) ->
      min = 20
      max = 300
      for i in [0..rand(6)]
        @circle(focus.x - max*0.5 + rand(max),
                focus.y - max*0.5 + rand(max), min + rand(max - min)).attr({
                  stroke: color
                  'stroke-width': 1 + rand(10)
                })
    </script>

    <script type="text/x-brush">
    Artist.add (color) ->
      size = 5 + rand(10)
      step = size + rand(size)

      for y in [0..@height] by  step
        @path("M".concat(@width*0.5, ",", y, "L", 0, ',', y+size*0.5, "L", @width*0.5, ',', y+size, 'L', @width, ',', y+size*0.5, 'Z')).attr({
          fill: color
          stroke: 'none'
        })
    </script>

    <script type="text/x-brush">
    Artist.add (color) ->
      step = 20 + rand(30)
      weight = 1 + rand(10)
      for i in [0..(@width+@height)] by step
        @path(['M', -weight, i, 'L', i, -weight]).attr({
          stroke: color
          'stroke-width': weight
          fill: 'none'
        })
    </script>

    <script type="text/x-brush">
    Artist.add (color) ->
      radius = 350
      @circle(@width/2, rand(2*radius)+radius, radius).attr({
        fill: color
        stroke: 'none'
      })
    </script>

    <script type="text/x-brush">
    Artist.add (color) ->
      width = 300
      height = 300
      x = rand(@width*0.75) - (width*0.5)
      y = rand(@height*0.9) + (width*0.5)
      for i in [0..4]
        @rect(x, y-(i*80), width, height).attr({
          stroke: 'none'
          fill: color
          rotation: 45
        })
    </script>

    <script type="text/x-brush">
    Artist.add (color, focus) ->
      size = 20 + rand(20)
      spacing = 60 + rand(20)
      distance = (x1,y1,x2,y2) ->
        Math.sqrt(Math.pow(x2 - x1,2) + Math.pow(y2 - y1, 2))
      for x in [0..@width] by spacing
        for y in [0..@height] by spacing
          opacity = ((@width*0.5) - distance(x, y, focus.x, focus.y)) / (@width*0.5)

          @path("M".concat(x, ",", y, "m0-", size * 0.58, "l", size * 0.5, ",", size * 0.87, "-", size, ",0z")).attr({
            fill: color
            stroke: 'none'
          })
    </script>
  </body>
</html>
